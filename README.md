# TagZero - 纯前端数据标注工具

TagZero 是一个基于 Web 的本地优先数据标注工具，旨在提供轻量、高效的图像标注体验。用户直接打开浏览器即可使用，数据存储在本地浏览器内存/硬盘中（IndexedDB），不依赖后端服务。

## ✨ 功能详解 (Features)

### 1. 🎨 核心标注系统 (Annotation System)

#### 多样化图形支持
- **矩形 (Rectangle)**: 适用于通用的目标检测标注。
- **圆形 (Circle)**: 适用于圆形物体标注，支持半径调整。
- **三角形 (Triangle)**: 适用于简单的角点标注。
- **多边形 (Polygon)**: 适用于复杂轮廓的精细标注，支持无限顶点。

#### 智能多边形编辑 (Smart Polygon Editing)
- **自动增密 (Auto-Densify)**: 在拖拽多边形顶点改变形状时，如果相邻边线长度超过 40px，系统会自动在中间插入新的顶点，帮助您更轻松地拟合平滑曲线。
- **双击加点**: 在多边形的边线上双击，即可在点击位置精确添加一个新顶点。
- **双击删点**: 双击任意顶点即可将其删除。
- **模糊删除**: 双击边线时，如果鼠标距离已有顶点很近（<8px），系统会智能判定为删除该顶点，容错率更高。

#### 画布交互与控制
- **高性能渲染**: 基于 Konva.js 引擎，支持千级图形流畅渲染。
- **智能边界限制**: 图形拖拽或调整大小时，自动限制在图片范围内，防止标注溢出。
- **图层管理**: 选中图形自动置顶，避免重叠遮挡。
- **辅助对齐**: 绘制和拖拽时显示辅助线，并支持智能吸附，确保标注精准对齐。

### 2. 🔍 放大镜工具 (Magnifier)

- **一键开启**: 按下 **`Z`** 键即可快速切换放大镜模式。
- **像素级细节**: 提供 1x - 16x 的放大倍率，专为微小物体或边缘修正设计。
- **自定义尺寸**: 可调整镜框大小（200px - 600px），适应不同屏幕与习惯。
- **智能避让**: 放大镜会自动避开鼠标位置和屏幕边缘，确保视线不被遮挡。
- **全层渲染**: 实时同步显示图片、标注图形及辅助线，所见即所得。

### 3. 🏷️ 标签管理 (Label Management)

- **本地持久化**: 使用 IndexedDB 存储标签配置，刷新页面不丢失。
- **配置导入/导出**: 支持将标签配置导出为 JSON 文件（内嵌 Base64 图片），方便团队成员之间共享配置。导入时自动处理重名冲突（如 `xxx import(1)`），确保数据安全。
- **多套标签集**: 支持创建多组标签配置（Label Sets），适应不同项目需求。
- **高对比度配色**: 内置 64 种高对比度预设颜色，自动分配或手动指定。
- **同步/本地模式**: 支持模拟远程同步（锁定标签集）或本地自由编辑模式。

### 4. 🖥️ UI/UX 体验优化

- **全屏专注模式**: 最大化工作区域，减少干扰。
- **动态侧边栏**: 可拖拽调整文件列表宽度，适应长文件名显示。
- **智能缩放策略**: 图片加载时自动适配画布大小（Contain 模式）。
- **平移控制**: 支持**鼠标右键按住拖拽**来平移整个画布，操作符合直觉。
- **防误触机制**: 自动过滤极小图形（<3px/5px），防止产生垃圾数据。

### 5. 📤 数据导出与验证 (Export & Validation)

- **多格式导出**:
  - **TagZero JSON**: 包含完整编辑信息的原生格式。
  - **COCO**: 标准 MS COCO 格式 (JSON)。
  - **YOLO**: 适用于 YOLO 模型训练的格式 (TXT + Images)。
  - **Pascal VOC**: 标准 XML 格式。
- **导出校验**: 导出前自动检查是否有未标注的图片，并通过红色高亮直观提示，防止遗漏。

---

## ⌨️ 快捷键说明 (Shortcuts)

为了提升标注效率，TagZero 提供了全方位的键盘快捷键支持。

### 🛠️ 工具切换 (Tools)

| 按键 | 功能 | 说明 |
| :--- | :--- | :--- |
| **`R`** | 矩形工具 | 切换到矩形绘制模式 (Rectangle) |
| **`C`** | 圆形工具 | 切换到圆形绘制模式 (Circle) |
| **`T`** | 三角形工具 | 切换到三角形绘制模式 (Triangle) |
| **`P`** | 多边形工具 | 切换到多边形绘制模式 (Polygon) |

### ✏️ 编辑操作 (Editing)

| 按键 | 功能 | 说明 |
| :--- | :--- | :--- |
| **`Delete`** / **`Backspace`** | 删除 | 删除当前选中的标注图形 |
| **`Ctrl` + `Z`** | 撤销 | 撤销上一步操作 (Undo) |
| **`Ctrl` + `Shift` + `Z`** | 重做 | 恢复撤销的操作 (Redo) |
| **`Ctrl` + `S`** | 导出 | 触发数据导出弹窗 |
| **`Esc`** | 取消/取消选中 | 取消当前绘制或取消选中图形 |

*(注：Mac 用户请使用 `Cmd` 键代替 `Ctrl` 键)*

### 🔭 视图与导航 (View & Navigation)

| 按键 | 功能 | 说明 |
| :--- | :--- | :--- |
| **`Z`** | 放大镜开关 | 开启或关闭局部放大镜模式 |
| **`A`** / **`←`** | 上一张 | 切换到文件列表中的上一张图片 |
| **`D`** / **`→`** | 下一张 | 切换到文件列表中的下一张图片 |
| **`Ctrl` + `+`** | 放大画布 | 增加画布缩放比例 |
| **`Ctrl` + `-`** | 缩小画布 | 减小画布缩放比例 |
| **`Ctrl` + `0`** | 重置缩放 | 将画布恢复到默认适配大小 |
| **鼠标滚轮** | 缩放 | 滚动滚轮进行缩放 |
| **鼠标右键拖拽** | 平移 | 按住右键拖拽画布进行平移 |

---

## 📅 未来计划 (Roadmap)

### Phase 1: 基础完善 (Completed)
- [x] 核心图形绘制与编辑 (矩形、圆、三角、多边形)
- [x] 标签配置持久化 & 导入导出
- [x] 数据导出 (COCO, VOC, YOLO)
- [x] 完整快捷键支持
- [x] 撤销/重做 (Undo/Redo)
- [x] 辅助对齐与吸附
- [x] 放大镜工具
- [x] 多边形增强 (智能加点、增密)

### Phase 2: 进阶体验 (In Progress)
- [ ] **快捷键自定义**: 允许用户修改默认快捷键绑定。
- [ ] **多选操作**: 支持框选多个图形进行批量移动或删除。
- [ ] **历史记录面板**: 可视化查看和跳转操作历史。

### Phase 3: 智能化与协作 (Future)
- [ ] **AI 辅助标注**: 接入 SAM (Segment Anything Model) 进行前端智能分割。
- [ ] **后端集成**: 支持 API 对接，实现云端存储与团队协作。
- [ ] **标注质检**: 自动检测重叠、过小或异常的标注框。

## 🛠️ 技术栈 (Tech Stack)

- **Core**: Vue 3, TypeScript, Vite
- **State**: Pinia
- **UI**: Naive UI, Tailwind CSS
- **Graphics**: Konva.js, vue-konva
- **Storage**: IndexedDB (idb wrapper)
- **I18n**: vue-i18n (中/英支持)

## 🚀 快速开始

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```
